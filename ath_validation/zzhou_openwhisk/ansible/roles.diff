diff -r roles/controller/tasks/deploy.yml ../../openwhisk/openwhisk/ansible/roles/controller/tasks/deploy.yml
204c204
<       "CONFIG_whisk_userEvents_enabled": "{{ user_events | default(false) | lower }}"
---
>       "CONFIG_whisk_userEvents_enabled": "{{ user_events | default(false) | string }}"
223c223
<       "CONFIG_whisk_featureFlags_requireApiKeyAnnotation": "{{ whisk.feature_flags.require_api_key_annotation | default(true) | lower }}"
---
>       "CONFIG_whisk_featureFlags_requireApiKeyAnnotation": "{{ whisk.feature_flags.require_api_key_annotation | default(true) | string }}"
234c234
<         "{{ runtimes_bypass_pull_for_local_images | default() | lower }}"
---
>         "{{ runtimes_bypass_pull_for_local_images | default() | string }}"
238,240c238,240
<       "METRICS_KAMON": "{{ metrics.kamon.enabled | default(false) | lower }}"
<       "METRICS_KAMON_TAGS": "{{ metrics.kamon.tags | default() | lower }}"
<       "METRICS_LOG": "{{ metrics.log.enabled | default(false) | lower }}"
---
>       "METRICS_KAMON": "{{ metrics.kamon.enabled | default(false) | string }}"
>       "METRICS_KAMON_TAGS": "{{ metrics.kamon.tags | default() | string }}"
>       "METRICS_LOG": "{{ metrics.log.enabled | default(false) | string }}"
256,257d255
<       "CONFIG_whisk_loadbalancer_timeoutAddon":
<         "{{ controller.timeoutAddon }}"
272c270
<       "CONFIG_whisk_controller_activation_pollingFromDb": "{{ controller_activation_pollingFromDb | default(true) | lower }}"
---
>       "CONFIG_whisk_controller_activation_pollingFromDb": "{{ controller_activation_pollingFromDb | default(true) | string }}"
277,292d274
< 
< - name: setup elasticsearch activation store env
<   set_fact:
<     elastic_env:
<       "CONFIG_whisk_activationStore_elasticsearch_protocol": "{{ db.elasticsearch.protocol}}"
<       "CONFIG_whisk_activationStore_elasticsearch_hosts": "{{ elasticsearch_connect_string }}"
<       "CONFIG_whisk_activationStore_elasticsearch_indexPattern": "{{ db.elasticsearch.index_pattern }}"
<       "CONFIG_whisk_activationStore_elasticsearch_username": "{{ db.elasticsearch.auth.admin.username }}"
<       "CONFIG_whisk_activationStore_elasticsearch_password": "{{ db.elasticsearch.auth.admin.password }}"
<       "CONFIG_whisk_spi_ActivationStoreProvider": "org.apache.openwhisk.core.database.elasticsearch.ElasticSearchActivationStoreProvider"
<   when: db.activation_store.backend == "ElasticSearch"
< 
< - name: merge elasticsearch activation store env
<   set_fact:
<     env: "{{ env | combine(elastic_env) }}"
<   when: db.activation_store.backend == "ElasticSearch"
Only in roles: elasticsearch
diff -r roles/invoker/tasks/deploy.yml ../../openwhisk/openwhisk/ansible/roles/invoker/tasks/deploy.yml
224c224
<       "CONFIG_whisk_userEvents_enabled": "{{ user_events | default(false) | lower }}"
---
>       "CONFIG_whisk_userEvents_enabled": "{{ user_events | default(false) | string }}"
248c248
<       "CONFIG_whisk_runtimes_bypassPullForLocalImages": "{{ runtimes_bypass_pull_for_local_images | default() | lower }}"
---
>       "CONFIG_whisk_runtimes_bypassPullForLocalImages": "{{ runtimes_bypass_pull_for_local_images | default() | string }}"
254c254
<       "CONFIG_whisk_docker_containerFactory_useRunc": "{{ invoker.useRunc | default(false) | lower }}"
---
>       "CONFIG_whisk_docker_containerFactory_useRunc": "{{ invoker.useRunc | default(false) | string }}"
256,258c256,258
<       "METRICS_KAMON": "{{ metrics.kamon.enabled | default(false) | lower }}"
<       "METRICS_KAMON_TAGS": "{{ metrics.kamon.tags | default() | lower }}"
<       "METRICS_LOG": "{{ metrics.log.enabled | default(false) | lower }}"
---
>       "METRICS_KAMON": "{{ metrics.kamon.enabled | default(false) | string }}"
>       "METRICS_KAMON_TAGS": "{{ metrics.kamon.tags | default() | string }}"
>       "METRICS_LOG": "{{ metrics.log.enabled | default(false) | string }}"
274c274
<       "CONFIG_whisk_containerPool_akkaClient": "{{ container_pool_akka_client | default('false') | lower }}"
---
>       "CONFIG_whisk_containerPool_akkaClient": "{{ container_pool_akka_client | default('false') | string }}"
293,308d292
< - name: setup elasticsearch activation store env
<   set_fact:
<     elastic_env:
<       "CONFIG_whisk_activationStore_elasticsearch_protocol": "{{ db.elasticsearch.protocol}}"
<       "CONFIG_whisk_activationStore_elasticsearch_hosts": "{{ elasticsearch_connect_string }}"
<       "CONFIG_whisk_activationStore_elasticsearch_indexPattern": "{{ db.elasticsearch.index_pattern }}"
<       "CONFIG_whisk_activationStore_elasticsearch_username": "{{ db.elasticsearch.auth.admin.username }}"
<       "CONFIG_whisk_activationStore_elasticsearch_password": "{{ db.elasticsearch.auth.admin.password }}"
<       "CONFIG_whisk_spi_ActivationStoreProvider": "org.apache.openwhisk.core.database.elasticsearch.ElasticSearchActivationStoreProvider"
<   when: db.activation_store.backend == "ElasticSearch"
< 
< - name: merge elasticsearch activation store env
<   set_fact:
<     env: "{{ env | combine(elastic_env) }}"
<   when: db.activation_store.backend == "ElasticSearch"
< 
364,368d347
< 
< - name: set invoker docker volumes
<   set_fact:
<     volumes: "{{ volumes|default('') }},{{ invoker.docker.volumes | join(',') }}"
<   when: invoker.docker.volumes|length > 0
diff -r roles/kafka/tasks/deploy.yml ../../openwhisk/openwhisk/ansible/roles/kafka/tasks/deploy.yml
50,53c50
<       "KAFKA_LISTENER_SECURITY_PROTOCOL_MAP": "EXTERNAL:PLAINTEXT"
<       "KAFKA_LISTENERS": "EXTERNAL://:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }}"
<       "KAFKA_ADVERTISED_LISTENERS": "EXTERNAL://{{ ansible_host }}:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }}"
<       "KAFKA_INTER_BROKER_LISTENER_NAME": "EXTERNAL"
---
>       "KAFKA_ADVERTISED_HOST_NAME": "{{ ansible_host }}"
62,64c59,61
<       "KAFKA_LISTENERS": "EXTERNAL://:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }},INTERNAL://:{{ kafka.port + groups['kafkas'].index(inventory_hostname) }}"
<       "KAFKA_ADVERTISED_LISTENERS": "EXTERNAL://{{ ansible_host }}:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }},INTERNAL://{{ ansible_host }}:{{ kafka.port + groups['kafkas'].index(inventory_hostname) }}"
<       "KAFKA_INTER_BROKER_LISTENER_NAME": "INTERNAL"
---
>       "KAFKA_LISTENERS": "EXTERNAL://:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }}"
>       "KAFKA_ADVERTISED_LISTENERS": "EXTERNAL://{{ ansible_host }}:{{ kafka.advertisedPort + groups['kafkas'].index(inventory_hostname) }}"
>       "KAFKA_PROTOCOL_NAME": "INTERNAL"
72a70,74
>     # The sed script passed in CUSTOM_INIT_SCRIPT fixes a bug in the wurstmeister dcoker image
>     # by patching the server.configuration file right before kafka is started.
>     # The script adds the missing advertized hostname to the advertised.listener property
>     # Issue: https://github.com/wurstmeister/kafka-docker/issues/221
>       "CUSTOM_INIT_SCRIPT": sed -i \'/^advertised\\.listeners/ s/\\/\\/\\:/\\/\\/{{ ansible_host }}\\:/\' /opt/kafka/config/server.properties
diff -r roles/nginx/templates/nginx.conf.j2 ../../openwhisk/openwhisk/ansible/roles/nginx/templates/nginx.conf.j2
143a144,147
>         location /OpenWhiskIOSStarterApp.zip {
>             return 301 https://github.com/apache/openwhisk-client-swift/releases/download/0.3.0/starterapp-0.3.0.zip;
>         }
> 
